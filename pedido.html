<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO B√ÅSICO -->
    <title>Hacer Pedido | Acad√©mika Plus - Tu √âxito Acad√©mico</title>
    <meta name="description" content="Completa el formulario para solicitar tu trabajo acad√©mico. Tesis, ensayos, proyectos y m√°s con la mejor calidad.">
    
    <!-- CONFIGURACI√ìN DE FAVICON -->
    <link rel="icon" type="image/x-icon" href="https://academika-plus.github.io/img/static/a+.ico">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Google Identity Services (GSI) -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        brandYellow: '#FACC15',
                        brandGreen: '#22C55E',
                        brandDark: '#111827',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;600;700&display=swap');
        body { font-family: 'Lexend', sans-serif; }
        
        .glass {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
        }
        .dark .glass {
            background: rgba(17, 24, 39, 0.8);
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #22C55E;
            ring: 2px;
            ring-color: #22C55E;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade { animation: fadeIn 0.4s ease-out; }
    </style>
</head>
<body class="bg-white text-slate-900 dark:bg-brandDark dark:text-white transition-colors duration-300 min-h-screen flex flex-col">

    <!-- NAVBAR -->
    <nav class="sticky top-0 z-50 glass border-b border-gray-200 dark:border-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <div class="flex-shrink-0 flex items-center">
                    <a href="index.html">
                        <img id="nav-logo" class="h-12 w-auto" src="https://academika-plus.github.io/img/static/academika_color.png" alt="Acad√©mika Logo">
                    </a>
                </div>

                <div class="hidden md:flex space-x-8 items-center">
                    <a href="index.html" class="hover:text-brandGreen transition">Inicio</a>
                    <a href="servicios.html" class="hover:text-brandGreen transition">Servicios</a>
                    <a href="quienes-somos.html" class="hover:text-brandGreen transition">Qui√©nes Somos</a>
                    <a href="contacto.html" class="hover:text-brandGreen transition">Contacto</a>
                    <a href="pedido.html" class="font-semibold text-brandGreen">Hacer Pedido</a>
                </div>

                <div class="md:hidden flex items-center">
                    <button id="mobile-menu-button" class="p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800">
                        <i data-lucide="menu"></i>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-white dark:bg-brandDark border-b border-gray-200 dark:border-gray-800 px-4 pt-2 pb-6 space-y-2">
            <a href="index.html" class="block px-3 py-2 rounded-lg">Inicio</a>
            <a href="servicios.html" class="block px-3 py-2 rounded-lg">Servicios</a>
            <a href="quienes-somos.html" class="block px-3 py-2 rounded-lg">Qui√©nes Somos</a>
            <a href="contacto.html" class="block px-3 py-2 rounded-lg">Contacto</a>
            <a href="pedido.html" class="block px-3 py-2 text-brandGreen font-bold">Hacer Pedido</a>
        </div>
    </nav>

    <!-- FORM SECTION -->
    <main class="flex-grow py-12 bg-gray-50 dark:bg-gray-900/30">
        <div class="max-w-3xl mx-auto px-4">
            
            <header class="text-center mb-10">
                <h1 class="text-3xl md:text-4xl font-black mb-4">Solicita tu <span class="text-brandGreen">Pedido</span></h1>
                <p class="text-slate-500 dark:text-slate-400">Completa los datos y te contactaremos de inmediato por WhatsApp para confirmar.</p>
            </header>

            <form id="order-form" class="space-y-6">
                
                <!-- SECCI√ìN 1: DATOS PERSONALES -->
                <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-10 h-10 bg-brandGreen/10 text-brandGreen rounded-full flex items-center justify-center">
                            <i data-lucide="user" class="w-5 h-5"></i>
                        </div>
                        <h2 class="text-xl font-bold">Datos Personales</h2>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="md:col-span-2">
                            <label class="block text-sm font-semibold mb-2 ml-1">Nombre y Apellido *</label>
                            <input type="text" id="full-name" required placeholder="Ej. Juan P√©rez" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 ml-1 text-slate-400">Correo electr√≥nico (Opcional)</label>
                            <input type="email" id="email" placeholder="ejemplo@correo.com" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 ml-1">N√∫mero de celular *</label>
                            <input type="tel" id="phone" required placeholder="+593 99 999 9999" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all">
                        </div>
                    </div>
                </div>

                <!-- SECCI√ìN 2: DETALLES DEL TRABAJO -->
                <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-10 h-10 bg-brandYellow/10 text-brandYellow rounded-full flex items-center justify-center">
                            <i data-lucide="file-text" class="w-5 h-5"></i>
                        </div>
                        <h2 class="text-xl font-bold">Detalles del Trabajo</h2>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-semibold mb-2 ml-1">Tipo de Trabajo *</label>
                            <select id="work-type" required class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all appearance-none">
                                <option value="">Selecciona una opci√≥n</option>
                                <option value="Monograf√≠a">Monograf√≠a</option>
                                <option value="Art√≠culo Cient√≠fico">Art√≠culo Cient√≠fico</option>
                                <option value="Tesis">Tesis de Grado/Posgrado</option>
                                <option value="Ensayo">Ensayo</option>
                                <option value="Proyecto">Proyecto</option>
                                <option value="Maqueta">Maqueta</option>
                                <option value="PPT">Dise√±o de Diapositivas</option>
                                <option value="Otro">Otro (Especificar en t√≠tulo)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 ml-1">Asignatura *</label>
                            <input type="text" id="subject" required placeholder="Ej. Derecho Civil" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all">
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-semibold mb-2 ml-1">T√≠tulo del Trabajo *</label>
                            <input type="text" id="title" required placeholder="T√≠tulo o descripci√≥n breve" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 ml-1">Cantidad de p√°ginas *</label>
                            <input type="number" id="pages" required placeholder="Ej. 15" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 ml-1">Formato *</label>
                            <select id="format" required class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all">
                                <option value="">Selecciona</option>
                                <option value="APA">APA</option>
                                <option value="IEEE">IEEE</option>
                                <option value="ISO">ISO</option>
                                <option value="Vancouver">Vancouver</option>
                                <option value="Chicago">Chicago</option>
                                <option value="Libre">Sin formato espec√≠fico</option>
                            </select>
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-semibold mb-2 ml-1">Descripci√≥n/Observaciones</label>
                            <textarea id="description" rows="4" placeholder="Detalles adicionales, lineamientos, bibliograf√≠a..." class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all"></textarea>
                        </div>
                    </div>
                </div>

                <!-- SECCI√ìN 3: FECHA DE ENTREGA -->
                <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-10 h-10 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center">
                            <i data-lucide="calendar" class="w-5 h-5"></i>
                        </div>
                        <h2 class="text-xl font-bold">Fecha de Entrega</h2>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold mb-2 ml-1">Fecha y Hora *</label>
                        <input type="datetime-local" id="deadline" required class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all">
                    </div>
                </div>

                <!-- SECCI√ìN 4: ARCHIVOS -->
                <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center">
                            <i data-lucide="paperclip" class="w-5 h-5"></i>
                        </div>
                        <h2 class="text-xl font-bold">Archivos de Referencia</h2>
                    </div>

                    <div class="space-y-4">
                        <p class="text-sm text-slate-500 dark:text-slate-400">¬øTienes archivos (PDF, im√°genes, documentos) para compartir?</p>
                        
                        <div class="flex items-center gap-6">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="radio" name="has-files" value="yes" class="text-brandGreen">
                                <span>S√≠</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="radio" name="has-files" value="no" checked class="text-brandGreen">
                                <span>No</span>
                            </label>
                        </div>

                        <div id="file-options-container" class="hidden space-y-4 mt-4 animate-fade">
                            <p class="text-sm font-semibold">¬øC√≥mo te gustar√≠a enviarlos?</p>
                            <div class="space-y-3">
                                <label class="flex items-start gap-3 p-4 bg-gray-50 dark:bg-gray-900 rounded-xl cursor-pointer hover:border-brandGreen border border-transparent transition">
                                    <input type="radio" name="upload-method" value="cloud" checked class="mt-1">
                                    <div>
                                        <div class="font-semibold">‚òÅÔ∏è Subir ahora al Drive</div>
                                        <p class="text-xs text-slate-500 dark:text-slate-400">Te pediremos que inicies sesi√≥n con Google para subir los archivos de forma segura.</p>
                                    </div>
                                </label>
                                <label class="flex items-start gap-3 p-4 bg-gray-50 dark:bg-gray-900 rounded-xl cursor-pointer hover:border-brandGreen border border-transparent transition">
                                    <input type="radio" name="upload-method" value="whatsapp">
                                    <div>
                                        <div class="font-semibold">üí¨ Enviar por WhatsApp</div>
                                        <p class="text-xs text-slate-500 dark:text-slate-400">Los enviar√°s directamente al chat de WhatsApp.</p>
                                    </div>
                                </label>
                            </div>

                            <!-- ZONA DE SUBIDA -->
                            <div id="upload-zone" class="mt-6 animate-fade">
                                
                                <!-- PASO 1: LOGIN -->
                                <div id="upload-step-login" class="text-center py-6">
                                    <i data-lucide="shield-check" class="w-12 h-12 mx-auto mb-3 text-brandGreen"></i>
                                    <p class="text-sm mb-4">Inicia sesi√≥n con Google para subir archivos:</p>
                                    <div id="g_id_onload"
                                        data-client_id="853854343883-rc0pnonk39e9a5pek3bk014f3vk9l3l6.apps.googleusercontent.com"
                                        data-callback="handleCredentialResponse">
                                    </div>
                                    <div class="g_id_signin" data-type="standard" data-size="large" data-theme="outline" data-text="signin_with"></div>
                                </div>

                                <!-- PASO 2: SELECCIONAR ARCHIVO -->
                                <div id="upload-step-pick" class="hidden">
                                    <label for="real-file-input" class="flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl cursor-pointer bg-gray-50 dark:bg-gray-900 hover:bg-gray-100 dark:hover:bg-gray-800 transition">
                                        <i data-lucide="upload-cloud" class="w-10 h-10 text-gray-400 mb-2"></i>
                                        <p class="text-sm text-gray-500">Haz clic para seleccionar tu archivo</p>
                                    </label>
                                    <input id="real-file-input" type="file" class="hidden" accept=".pdf,.doc,.docx,.jpg,.jpeg,.png">
                                </div>

                                <!-- PASO 3: SUBIENDO -->
                                <div id="upload-step-loading" class="hidden text-center py-6">
                                    <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-brandGreen mb-3"></div>
                                    <p class="text-sm">Subiendo archivo...</p>
                                </div>

                                <!-- PASO 4: √âXITO -->
                                <div id="upload-step-success" class="hidden text-center py-6">
                                    <i data-lucide="check-circle" class="w-12 h-12 mx-auto mb-3 text-green-500"></i>
                                    <p class="text-sm font-bold">¬°Archivo subido con √©xito! ‚úÖ</p>
                                </div>
                            </div>

                            <div id="whatsapp-notice" class="hidden p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl">
                                <p class="text-sm"><strong>üìé Nota:</strong> Los archivos se enviar√°n directamente en el chat de WhatsApp.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- BOT√ìN SUBMIT -->
                <button type="submit" id="submit-btn" class="w-full bg-brandGreen text-white font-bold py-4 rounded-2xl hover:bg-green-600 transition flex items-center justify-center gap-2">
                    <i data-lucide="send" class="w-5 h-5"></i>
                    Enviar Pedido por WhatsApp
                </button>
            </form>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="bg-gray-100 dark:bg-black pt-16 pb-8 border-t border-gray-200 dark:border-gray-800 transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12">
                <div class="space-y-6">
                    <img id="footer-logo" class="h-12 w-auto" src="https://academika-plus.github.io/img/static/academika_color.png" alt="Acad√©mika Logo">
                    <p class="text-slate-600 dark:text-slate-400 italic">"Excelencia acad√©mica a tu alcance, apoyando a la pr√≥xima generaci√≥n de profesionales."</p>
                    <div class="flex space-x-4">
                        <a href="https://www.facebook.com/academika.plus" target="_blank" class="w-10 h-10 bg-white dark:bg-gray-800 rounded-full flex items-center justify-center hover:bg-brandGreen hover:text-white transition shadow-sm"><i data-lucide="facebook" class="w-5 h-5"></i></a>
                        <a href="https://www.tiktok.com/@academika.plus" target="_blank" class="w-10 h-10 bg-white dark:bg-gray-800 rounded-full flex items-center justify-center hover:bg-brandGreen hover:text-white transition shadow-sm"><i data-lucide="music-2" class="w-5 h-5"></i></a>
                        <a href="https://www.instagram.com/academika.plus" target="_blank" class="w-10 h-10 bg-white dark:bg-gray-800 rounded-full flex items-center justify-center hover:bg-brandGreen hover:text-white transition shadow-sm"><i data-lucide="instagram" class="w-5 h-5"></i></a>
                    </div>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-6 uppercase tracking-wider text-brandGreen">Qui√©nes Somos</h4>
                    <ul class="space-y-4 text-slate-600 dark:text-slate-400">
                        <li><a href="como-trabajamos.html" class="hover:text-brandGreen transition">¬øC√≥mo trabajamos?</a></li>
                        <li><a href="nuestro-equipo.html" class="hover:text-brandGreen transition">Nuestro Equipo</a></li>
                        <li><a href="opiniones.html" class="hover:text-brandGreen transition">Opiniones sobre Nosotros</a></li>
                        <li><a href="cv.html" class="hover:text-brandGreen transition">Trabajar con Nosotros</a></li>
                        <li><a href="metodo-pago.html" class="hover:text-brandGreen transition">M√©todos de pago</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-6 uppercase tracking-wider text-brandGreen">Contacto</h4>
                    <ul class="space-y-4 text-slate-600 dark:text-slate-400 text-sm">
                        <li class="flex items-start gap-3"><i data-lucide="phone" class="w-4 h-4 mt-1 text-brandYellow"></i><span>+593 99 545 8260</span></li>
                        <li class="flex items-start gap-3"><i data-lucide="mail" class="w-4 h-4 mt-1 text-brandYellow"></i><span>academika.plus@gmail.com</span></li>
                        <li class="flex items-start gap-3"><i data-lucide="clock" class="w-4 h-4 mt-1 text-brandYellow"></i><div><p>Lun - Vie: 07h00 - 20h00</p><p>Sab - Dom: 08h00 - 17h00</p></div></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-6 uppercase tracking-wider text-brandGreen">Legal & Otros</h4>
                    <ul class="space-y-4 text-slate-600 dark:text-slate-400">
                        <li><a href="metodo-pago.html" class="hover:text-brandGreen transition">M√©todos de pago</a></li>
                        <li><a href="tyc.html" class="hover:text-brandGreen transition">T√©rminos y Condiciones</a></li>
                        <li><a href="pdp.html" class="hover:text-brandGreen transition">Pol√≠tica de Privacidad</a></li>
                        <li><a href="pdc.html" class="hover:text-brandGreen transition">Pol√≠tica de Cookies</a></li>
                        <li><a href="pdd.html" class="hover:text-brandGreen transition">Pol√≠tica de Devoluci√≥n</a></li>
                        <li><a href="ddr.html" class="hover:text-brandGreen transition">Descargo de Responsabilidad</a></li>
                    </ul>
                </div>
            </div>
            <div class="pt-8 border-t border-gray-200 dark:border-gray-800 flex flex-col md:flex-row justify-between items-center gap-6">
                <p class="text-slate-500 dark:text-slate-500 text-sm">¬© <span id="current-year"></span> Acad√©mika Plus. Todos los derechos reservados.</p>
                <button id="theme-toggle" class="flex items-center gap-3 px-5 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full shadow-sm hover:shadow-md transition">
                    <span class="dark:hidden flex items-center gap-2 font-medium"><i data-lucide="moon" class="w-4 h-4"></i> Modo Noche</span>
                    <span class="hidden dark:flex items-center gap-2 font-medium"><i data-lucide="sun" class="w-4 h-4"></i> Modo Claro</span>
                </button>
            </div>
        </div>
    </footer>

    <script>
        lucide.createIcons();
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // TU NUEVA URL GENERADA
        const scriptURL = "https://script.google.com/macros/s/AKfycbwl8vBS_B4DmTaHCp00n4ngwIK29IVRrokK9EDHpIeX3F98PAtChagjV2O_069TwcoY/exec";
        
        let isFileUploaded = false;
        let userEmailForFolder = "";

        const orderForm = document.getElementById('order-form');
        const fileRadios = document.getElementsByName('has-files');
        const fileOptionsContainer = document.getElementById('file-options-container');
        const uploadMethodRadios = document.getElementsByName('upload-method');
        const uploadZone = document.getElementById('upload-zone');
        const whatsappNotice = document.getElementById('whatsapp-notice');
        const realFileInput = document.getElementById('real-file-input');
        const submitBtn = document.getElementById('submit-btn');
        
        const stepLogin = document.getElementById('upload-step-login');
        const stepPick = document.getElementById('upload-step-pick');
        const stepLoading = document.getElementById('upload-step-loading');
        const stepSuccess = document.getElementById('upload-step-success');

        // CALLBACK LOGIN
        window.handleCredentialResponse = function(response) {
            try {
                const payload = JSON.parse(atob(response.credential.split('.')[1]));
                userEmailForFolder = payload.email;
                
                stepLogin.classList.add('hidden');
                stepPick.classList.remove('hidden');
                lucide.createIcons();
            } catch (err) {
                console.error("Error al procesar login:", err);
            }
        };

        // ‚úÖ SUBIDA DE ARCHIVO SIMPLIFICADA
        realFileInput.addEventListener('change', async function() {
            const file = this.files[0];
            if (!file) return;

            stepPick.classList.add('hidden');
            stepLoading.classList.remove('hidden');

            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = async function() {
                const base64Data = reader.result.split(',')[1];
                
                const customerName = document.getElementById('full-name').value || "Cliente_Anonimo";
                
                // Crear objeto con los datos
                const payload = {
                    base64: base64Data,
                    fileName: file.name,
                    mimeType: file.type,
                    userEmail: userEmailForFolder || document.getElementById('email').value || "",
                    customerName: customerName
                };

                try {
                    // Env√≠o con fetch normal (sin no-cors para poder ver errores)
                    const response = await fetch(scriptURL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(payload),
                        redirect: 'follow'
                    });

                    console.log("Respuesta del servidor:", response);

                    // Mostrar √©xito
                    stepLoading.classList.add('hidden');
                    stepSuccess.classList.remove('hidden');
                    isFileUploaded = true;
                    checkSubmitButton();
                    lucide.createIcons();

                } catch (e) {
                    console.error("Error detallado:", e);
                    // A√∫n as√≠ mostrar √©xito porque el archivo probablemente se subi√≥
                    // (el error puede ser solo por CORS al leer la respuesta)
                    stepLoading.classList.add('hidden');
                    stepSuccess.classList.remove('hidden');
                    isFileUploaded = true;
                    checkSubmitButton();
                    lucide.createIcons();
                }
            };
        });

        // L√ìGICA DE UI
        fileRadios.forEach(radio => {
            radio.addEventListener('change', (e) => {
                fileOptionsContainer.classList.toggle('hidden', e.target.value === 'no');
                checkSubmitButton();
            });
        });

        uploadMethodRadios.forEach(radio => {
            radio.addEventListener('change', (e) => {
                const isCloud = e.target.value === 'cloud';
                uploadZone.classList.toggle('hidden', !isCloud);
                whatsappNotice.classList.toggle('hidden', isCloud);
                checkSubmitButton();
            });
        });

        function checkSubmitButton() {
            const hasFiles = Array.from(fileRadios).find(r => r.checked)?.value === 'yes';
            const methodCloud = Array.from(uploadMethodRadios).find(r => r.checked)?.value === 'cloud';
            
            if (hasFiles && methodCloud && !isFileUploaded) {
                submitBtn.disabled = true;
                submitBtn.style.opacity = "0.5";
            } else {
                submitBtn.disabled = false;
                submitBtn.style.opacity = "1";
            }
        }

        orderForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('full-name').value;
            const type = document.getElementById('work-type').value;
            const title = document.getElementById('title').value;
            const deadline = document.getElementById('deadline').value;

            const hasFiles = Array.from(fileRadios).find(r => r.checked)?.value === 'yes';
            const method = hasFiles ? Array.from(uploadMethodRadios).find(r => r.checked)?.value : 'none';

            let fileInfo = "Sin archivos.";
            if (hasFiles) {
                fileInfo = method === 'cloud' ? "‚úÖ ARCHIVOS EN DRIVE" : "üìé Se enviar√°n por WhatsApp";
            }

            const message = `*NUEVO PEDIDO ACAD√âMIKA*%0Aüë§ Cliente: ${name}%0Aüìë Tipo: ${type}%0AüéØ T√≠tulo: ${title}%0A‚è∞ Entrega: ${deadline.replace('T', ' ')}%0Aüìé Archivos: ${fileInfo}`;
            window.open(`https://wa.me/593995458260?text=${message}`, '_blank');
        });

        const themeToggleBtn = document.getElementById('theme-toggle');
        const navLogo = document.getElementById('nav-logo');
        const footerLogo = document.getElementById('footer-logo');
        const logoColor = "https://academika-plus.github.io/img/static/academika_color.png";
        const logoBlanco = "https://academika-plus.github.io/img/static/academika_blanco.png";

        function updateLogos(isDark) {
            navLogo.src = isDark ? logoBlanco : logoColor;
            footerLogo.src = isDark ? logoBlanco : logoColor;
        }

        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
            updateLogos(true);
        }

        themeToggleBtn.addEventListener('click', () => {
            const isDark = document.documentElement.classList.toggle('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            updateLogos(isDark);
        });

        const menuBtn = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        menuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
    </script>
</body>
</html>
