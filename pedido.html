<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO B√ÅSICO -->
    <title>Hacer Pedido | Acad√©mika Plus</title>
    <meta name="description" content="Completa el formulario para solicitar tu trabajo acad√©mico. Tesis, ensayos, proyectos y m√°s con la mejor calidad.">
    
    <!-- CONFIGURACI√ìN DE FAVICON -->
    <link rel="icon" type="image/x-icon" href="https://academika-plus.github.io/img/static/a+.ico">
    <link rel="canonical" href="https://academika-plus.github.io/pedido">

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Google Identity Services (GSI) -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        brandYellow: '#FACC15',
                        brandGreen: '#22C55E',
                        brandDark: '#111827',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;600;700&display=swap');
        body { font-family: 'Lexend', sans-serif; }
        
        .glass {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
        }
        .dark .glass {
            background: rgba(17, 24, 39, 0.8);
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #22C55E;
            ring: 2px;
            ring-color: #22C55E;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade { animation: fadeIn 0.4s ease-out; }

        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }

        .drag-over {
            border-color: #22C55E !important;
            background-color: rgba(34, 197, 94, 0.1) !important;
        }
    </style>
</head>
<body class="bg-white text-slate-900 dark:bg-brandDark dark:text-white transition-colors duration-300 min-h-screen flex flex-col">

    <!-- NAVBAR -->
    <nav class="sticky top-0 z-50 glass border-b border-gray-200 dark:border-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 md:h-20 items-center">
                <div class="flex-shrink-0 flex items-center">
                    <a href="/">
                        <!-- Logo ajustado a h-6 (24px) en m√≥vil y h-8 (32px) en escritorio para mayor elegancia -->
                        <img id="nav-logo" class="h-6 md:h-8 w-auto transition-all duration-300" src="https://academika-plus.github.io/img/static/academika_color.png" alt="Acad√©mika Logo">
                    </a>
                </div>

                <!-- Men√∫ de Escritorio -->
                <div class="hidden md:flex space-x-8 items-center">
                    <a href="/" class="hover:text-brandGreen transition text-sm font-medium">Inicio</a>
                    <a href="/servicios" class="hover:text-brandGreen transition text-sm font-medium">Servicios</a>
                    <a href="/quienes-somos" class="hover:text-brandGreen transition text-sm font-medium">Qui√©nes Somos</a>
                    <a href="/contacto" class="hover:text-brandGreen transition text-sm font-medium">Contacto</a>
                    <a href="/pedido" class="bg-brandYellow text-black px-5 py-2 rounded-full font-bold hover:shadow-lg transition transform hover:-translate-y-0.5 text-sm">Hacer Pedido</a>
                </div>

                <!-- Bot√≥n de Men√∫ M√≥vil -->
                <div class="md:hidden flex items-center">
                    <button id="mobile-menu-button" class="p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
                        <i data-lucide="menu" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Men√∫ M√≥vil Desplegable -->
        <div id="mobile-menu" class="hidden md:hidden bg-white dark:bg-brandDark border-b border-gray-200 dark:border-gray-800 px-4 pt-2 pb-6 space-y-2">
            <a href="/" class="block px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg text-sm">Inicio</a>
            <a href="/servicios" class="block px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg text-sm">Servicios</a>
            <a href="/quienes-somos" class="block px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg text-sm">Qui√©nes Somos</a>
            <a href="/contacto" class="block px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg text-sm">Contacto</a>
            <a href="/pedido" class="block px-3 py-3 bg-brandYellow text-black font-bold text-center rounded-xl mt-4 text-sm shadow-md">Hacer Pedido</a>
        </div>
    </nav>

    <!-- FORM SECTION -->
    <main class="flex-grow py-12 bg-gray-50 dark:bg-gray-900/30">
        <div class="max-w-3xl mx-auto px-4">
            
            <header class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-black mb-4">Solicita tu <span class="text-brandGreen">Pedido</span></h1>
                <p class="text-slate-500 dark:text-slate-400">Tus datos est√°n protegidos. Completa el formulario para una cotizaci√≥n inmediata.</p>
            </header>

            <form id="order-form" class="space-y-8">
                
                <!-- SECCI√ìN 1: DATOS PERSONALES -->
                <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-10 h-10 bg-brandGreen/10 text-brandGreen rounded-full flex items-center justify-center">
                            <i data-lucide="user" class="w-5 h-5"></i>
                        </div>
                        <h2 class="text-xl font-bold">Datos Personales</h2>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="md:col-span-2">
                            <label class="block text-sm font-semibold mb-2 ml-1">Nombre y Apellido *</label>
                            <input type="text" id="full-name" required placeholder="Ej. Juan P√©rez" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 ml-1">Correo electr√≥nico (Opcional)</label>
                            <input type="email" id="email" placeholder="ejemplo@correo.com" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 ml-1">N√∫mero de celular *</label>
                            <input type="number" id="phone" required placeholder="0995458260" oninput="if(this.value.length > 10) this.value = this.value.slice(0, 10)" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all">
                        </div>
                    </div>
                </div>

                <!-- SECCI√ìN 2: DETALLES DEL TRABAJO -->
                <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-10 h-10 bg-brandYellow/10 text-brandYellow rounded-full flex items-center justify-center">
                            <i data-lucide="file-text" class="w-5 h-5"></i>
                        </div>
                        <h2 class="text-xl font-bold">Detalles del Trabajo</h2>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-semibold mb-2 ml-1">Tipo de Trabajo *</label>
                            <select id="work-type" required class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all appearance-none">
                                <option value="">Selecciona una opci√≥n</option>
                                <option value="Monograf√≠a">Monograf√≠a</option>
                                <option value="Tesis">Tesis de Grado/Posgrado</option>
                                <option value="Ensayo">Ensayo</option>
                                <option value="Proyecto">Proyecto</option>
                                <option value="Maqueta">Maqueta</option>
                                <option value="PPT">Dise√±o de Diapositivas</option>
                                <option value="Otro">Otro</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 ml-1">Asignatura *</label>
                            <input type="text" id="subject" required placeholder="Ej. Derecho Civil" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all">
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-semibold mb-2 ml-1">T√≠tulo del Trabajo *</label>
                            <input type="text" id="title" required placeholder="T√≠tulo o descripci√≥n breve" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 ml-1">N√∫mero de p√°ginas *</label>
                            <input type="number" id="pages" required placeholder="Ej. 15" class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 ml-1">Formato *</label>
                            <select id="format" required class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all">
                                <option value="">Selecciona</option>
                                <option value="APA 7">APA 7ma Edici√≥n</option>
                                <option value="APA 6">APA 6ta Edici√≥n</option>
                                <option value="Chicago">Chicago</option>
                                <option value="Vancouver">Vancouver</option>
                                <option value="IEEE">IEEE</option>
                                <option value="ISO">ISO</option>
                                <option value="Libre">Sin formato espec√≠fico</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- SECCI√ìN 3: FECHA DE ENTREGA -->
                <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-10 h-10 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center">
                            <i data-lucide="calendar" class="w-5 h-5"></i>
                        </div>
                        <h2 class="text-xl font-bold">Fecha de Entrega y Hora</h2>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold mb-2 ml-1">Fecha y Hora L√≠mite *</label>
                        <input type="datetime-local" id="deadline" required class="w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 dark:text-white transition-all">
                    </div>
                </div>

                <!-- SECCI√ìN 4: ARCHIVOS -->
                <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-sm border border-gray-100 dark:border-gray-700">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-10 h-10 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center">
                            <i data-lucide="paperclip" class="w-5 h-5"></i>
                        </div>
                        <h2 class="text-xl font-bold">Archivos de Referencia</h2>
                    </div>

                    <div class="space-y-4">
                        <p class="text-sm text-slate-500 dark:text-slate-400">¬øTienes archivos (PDF, im√°genes, documentos) para compartir?</p>
                        
                        <div class="flex items-center gap-6">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="radio" name="has-files" value="yes" class="w-4 h-4 text-brandGreen">
                                <span class="font-medium">S√≠</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="radio" name="has-files" value="no" checked class="w-4 h-4 text-brandGreen">
                                <span class="font-medium">No</span>
                            </label>
                        </div>

                        <div id="file-options-container" class="hidden space-y-4 mt-6 animate-fade">
                            <p class="text-sm font-bold">¬øC√≥mo prefieres enviarlos?</p>
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <label class="flex items-start gap-3 p-4 bg-gray-50 dark:bg-gray-900 rounded-2xl cursor-pointer hover:border-brandGreen border-2 border-transparent transition">
                                    <input type="radio" name="upload-method" value="whatsapp" class="mt-1 text-brandGreen">
                                    <div>
                                        <div class="font-bold">WhatsApp</div>
                                        <p class="text-xs text-slate-500">Manual dentro del chat.</p>
                                    </div>
                                </label>
                                <label class="flex items-start gap-3 p-4 bg-gray-50 dark:bg-gray-900 rounded-2xl cursor-pointer hover:border-brandGreen border-2 border-transparent transition">
                                    <input type="radio" name="upload-method" value="cloud" class="mt-1 text-brandGreen">
                                    <div>
                                        <div class="font-bold">Google Drive</div>
                                        <p class="text-xs text-slate-500">Subida directa al sistema.</p>
                                    </div>
                                </label>
                            </div>

                            <!-- MENSAJE WHATSAPP -->
                            <div id="whatsapp-notice" class="hidden p-4 bg-green-50 dark:bg-green-900/20 rounded-xl text-green-700 dark:text-green-400 text-sm italic">
                                <strong>‚ö†Ô∏è Recordatorio:</strong> Al finalizar el pedido, deber√°s adjuntar manualmente los archivos en la aplicaci√≥n de WhatsApp.
                            </div>

                            <!-- ZONA GOOGLE DRIVE -->
                            <div id="drive-zone" class="hidden space-y-6">
                                <div id="upload-step-login" class="text-center py-6 bg-gray-50 dark:bg-gray-900 rounded-2xl border-2 border-dashed border-gray-300 dark:border-gray-700">
                                    <p class="text-sm mb-4">Inicia sesi√≥n para habilitar la subida:</p>
                                    <div id="g_id_onload"
                                        data-client_id="853854343883-rc0pnonk39e9a5pek3bk014f3vk9l3l6.apps.googleusercontent.com"
                                        data-callback="handleCredentialResponse">
                                    </div>
                                    <div class="g_id_signin flex justify-center" data-type="standard"></div>
                                </div>

                                <div id="upload-step-pick" class="hidden space-y-4">
                                    <!-- √ÅREA DE SELECCI√ìN -->
                                    <div 
                                        id="drop-area"
                                        class="flex flex-col items-center justify-center w-full min-h-[160px] border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-2xl cursor-pointer bg-green-50/10 dark:bg-green-900/5 hover:bg-green-50 transition-all duration-300"
                                    >
                                        <i data-lucide="upload-cloud" class="w-10 h-10 text-brandGreen mb-3"></i>
                                        <p class="text-sm font-bold text-center px-4">Arrastra archivos aqu√≠ o haz clic para a√±adir</p>
                                        <p class="text-xs text-slate-400 mt-2">Documentos e Im√°genes (M√∫ltiples permitidos)</p>
                                    </div>
                                    <input id="real-file-input" type="file" class="hidden" accept=".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.txt,image/*" multiple>

                                    <!-- LISTA DE ARCHIVOS PENDIENTES -->
                                    <div id="pending-files-container" class="hidden space-y-3 bg-white dark:bg-gray-800 p-4 rounded-2xl border border-gray-100 dark:border-gray-700 shadow-sm animate-fade">
                                        <h3 class="text-xs font-bold uppercase tracking-wider text-slate-400 flex items-center gap-2">
                                            <i data-lucide="list" class="w-3 h-3"></i> Archivos seleccionados
                                        </h3>
                                        <div id="pending-files-list" class="space-y-2 max-h-48 overflow-y-auto pr-2 custom-scrollbar">
                                            <!-- Los archivos se renderizan aqu√≠ -->
                                        </div>
                                        <div class="pt-4 border-t border-gray-50 dark:border-gray-700 flex justify-end">
                                            <button 
                                                type="button" 
                                                id="start-upload-btn"
                                                class="bg-brandGreen text-white text-xs font-bold px-4 py-2 rounded-xl hover:bg-green-600 transition flex items-center gap-2"
                                            >
                                                <i data-lucide="check-circle" class="w-4 h-4"></i> Confirmar y Subir a Drive
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- BARRA DE CARGA -->
                                <div id="upload-step-loading" class="hidden space-y-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-2xl">
                                    <div class="flex flex-col gap-2">
                                        <div class="flex justify-between text-xs font-bold">
                                            <span id="loading-text" class="text-brandGreen">Iniciando subida...</span>
                                            <span id="upload-percentage">0%</span>
                                        </div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden">
                                            <div id="progress-bar" class="bg-brandGreen h-full w-0 transition-all duration-300"></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- √âXITO -->
                                <div id="upload-step-success" class="hidden flex flex-col items-center p-6 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-2xl text-center">
                                    <i data-lucide="check-circle" class="w-10 h-10 mb-2 animate-bounce"></i>
                                    <span class="font-bold text-lg">¬°Archivos subidos con √©xito! ‚úÖ</span>
                                    <p id="files-summary" class="text-sm mt-1 opacity-80"></p>
                                    <p class="text-[10px] mt-4 uppercase tracking-widest font-bold">Ya puedes enviar tu pedido final</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- T√âRMINOS -->
                <div class="flex items-start gap-3 p-2">
                    <input type="checkbox" id="terms-check" required class="mt-1 w-5 h-5 rounded border-gray-300 text-brandGreen focus:ring-brandGreen transition-colors cursor-pointer">
                    <label for="terms-check" class="text-sm text-slate-600 dark:text-slate-400 cursor-pointer">
                        Acepto los <a href="/legal/tyc" target="_blank" class="text-brandGreen font-bold underline">T√©rminos y Condiciones</a>, la <a href="/legal/pdd" target="_blank" class="text-brandGreen font-bold underline">Pol√≠tica de Devoluci√≥n</a> y el <a href="/legal/ddr" target="_blank" class="text-brandGreen font-bold underline">Descargo de Responsabilidad</a>.
                    </label>
                </div>

                <!-- BOT√ìN SUBMIT -->
                <button type="submit" id="submit-btn" class="w-full bg-brandGreen text-white font-bold py-5 rounded-3xl hover:bg-green-600 transition shadow-lg transform hover:-translate-y-1 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed">
                    <i data-lucide="send" class="w-5 h-5"></i>
                    Enviar Pedido por WhatsApp
                </button>
            </form>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="bg-gray-100 dark:bg-black pt-16 pb-8 border-t border-gray-200 dark:border-gray-800 transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12">
                <!-- Brand & Slogan -->
                <div class="space-y-6">
                    <img id="footer-logo" class="h-12 w-auto" src="https://academika-plus.github.io/img/static/academika_color.png" alt="Acad√©mika Logo">
                    <p class="text-slate-600 dark:text-slate-400 italic">
                        "Excelencia acad√©mica a tu alcance, apoyando a la pr√≥xima generaci√≥n de profesionales."
                    </p>
                    <div class="flex space-x-4">
                        <a href="https://www.facebook.com/academika.plus" target="_blank" class="w-10 h-10 bg-white dark:bg-gray-800 rounded-full flex items-center justify-center hover:bg-brandGreen hover:text-white transition shadow-sm">
                            <i data-lucide="facebook" class="w-5 h-5"></i>
                        </a>
                        <a href="https://www.tiktok.com/@academika.plus" target="_blank" class="w-10 h-10 bg-white dark:bg-gray-800 rounded-full flex items-center justify-center hover:bg-brandGreen hover:text-white transition shadow-sm">
                            <i data-lucide="music-2" class="w-5 h-5"></i>
                        </a>
                        <a href="https://www.instagram.com/academika.plus" target="_blank" class="w-10 h-10 bg-white dark:bg-gray-800 rounded-full flex items-center justify-center hover:bg-brandGreen hover:text-white transition shadow-sm">
                            <i data-lucide="instagram" class="w-5 h-5"></i>
                        </a>
                    </div>
                </div>

                <!-- Qui√©nes Somos Sub-links -->
                <div>
                    <h4 class="font-bold text-lg mb-6 uppercase tracking-wider text-brandGreen">Qui√©nes Somos</h4>
                    <ul class="space-y-4 text-slate-600 dark:text-slate-400">
                        <li><a href="/quienes-somos/como-trabajamos" class="hover:text-brandGreen transition">¬øC√≥mo trabajamos?</a></li>
                        <li><a href="/quienes-somos/nuestro-equipo" class="hover:text-brandGreen transition">Nuestro Equipo</a></li>
                        <li><a href="/quienes-somos/opiniones" class="hover:text-brandGreen transition">Opiniones sobre Nosotros</a></li>
                        <li><a href="/quienes-somos/cv" class="hover:text-brandGreen transition">Trabajar con Nosotros</a></li>
                        <li><a href="/quienes-somos/metodo-pago" class="hover:text-brandGreen transition">M√©todos de pago</a></li>
                    </ul>
                </div>

                <!-- Contact & Services -->
                <div>
                    <h4 class="font-bold text-lg mb-6 uppercase tracking-wider text-brandGreen">Contacto</h4>
                    <ul class="space-y-4 text-slate-600 dark:text-slate-400 text-sm">
                        <li class="flex items-start gap-3">
                            <i data-lucide="phone" class="w-4 h-4 mt-1 text-brandYellow"></i>
                            <span>+593 99 545 8260</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <i data-lucide="mail" class="w-4 h-4 mt-1 text-brandYellow"></i>
                            <span>academika.plus@gmail.com</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <i data-lucide="clock" class="w-4 h-4 mt-1 text-brandYellow"></i>
                            <div>
                                <p>Lun - Vie: 07h00 - 20h00</p>
                                <p>Sab - Dom: 08h00 - 17h00</p>
                            </div>
                        </li>
                        <li class="pt-4 font-bold border-t border-gray-200 dark:border-gray-800">
                            <a href="/servicios" class="hover:text-brandGreen">Ver todos nuestros servicios</a>
                        </li>
                    </ul>
                </div>

                <!-- Legal -->
                <div>
                    <h4 class="font-bold text-lg mb-6 uppercase tracking-wider text-brandGreen">Legal & Otros</h4>
                    <ul class="space-y-4 text-slate-600 dark:text-slate-400">
                        <li><a href="/legal/tyc" class="hover:text-brandGreen transition">T√©rminos y Condiciones</a></li>
                        <li><a href="/legal/pdp" class="hover:text-brandGreen transition">Pol√≠tica de Privacidad</a></li>
                        <li><a href="/legal/pdc" class="hover:text-brandGreen transition">Pol√≠tica de Cookies</a></li>
                        <li><a href="/legal/pdd" class="hover:text-brandGreen transition">Pol√≠tica de Devoluci√≥n</a></li>
                        <li><a href="/legal/cds" class="hover:text-brandGreen transition">Condiciones de Servicio</a></li>
                        <li><a href="/legal/ddr" class="hover:text-brandGreen transition">Descargo de Responsabilidad</a></li>
                    </ul>
                </div>
            </div>

            <!-- Footer Bottom: Theme Toggle & Copyright -->
            <div class="pt-8 border-t border-gray-200 dark:border-gray-800 flex flex-col md:flex-row justify-between items-center gap-6">
                <p class="text-slate-500 dark:text-slate-500 text-sm">
                    ¬© <span id="current-year"></span> Acad√©mika Plus. Todos los derechos reservados.
                </p>
                
                <button id="theme-toggle" class="flex items-center gap-3 px-5 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-full shadow-sm hover:shadow-md transition">
                    <span class="dark:hidden flex items-center gap-2 font-medium">
                        <i data-lucide="moon" class="w-4 h-4"></i> Modo Noche
                    </span>
                    <span class="hidden dark:flex items-center gap-2 font-medium">
                        <i data-lucide="sun" class="w-4 h-4"></i> Modo Claro
                    </span>
                </button>
            </div>
        </div>
    </footer>

    <script>
        lucide.createIcons();
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // CONFIGURACI√ìN DRIVE
        const scriptURL = "https://script.google.com/macros/s/AKfycby3iI_C2_b8rQf_OwjHYRg05fo1loOLbK0LCuXEpRaVkxN2TsSDbuP3KDlhd1_sNB0w/exec";
        let isFileUploaded = false;
        let uploadedFilesCount = 0;
        let userEmail = "";
        let pendingFiles = []; // Array para almacenar los archivos antes de subirlos

        // SELECTORES
        const orderForm = document.getElementById('order-form');
        const fileRadios = document.getElementsByName('has-files');
        const optionsContainer = document.getElementById('file-options-container');
        const methodRadios = document.getElementsByName('upload-method');
        const whatsappNotice = document.getElementById('whatsapp-notice');
        const driveZone = document.getElementById('drive-zone');
        const submitBtn = document.getElementById('submit-btn');
        const fileInput = document.getElementById('real-file-input');
        const dropArea = document.getElementById('drop-area');
        const startUploadBtn = document.getElementById('start-upload-btn');
        const pendingFilesContainer = document.getElementById('pending-files-container');
        const pendingFilesList = document.getElementById('pending-files-list');
        
        const stepLogin = document.getElementById('upload-step-login');
        const stepPick = document.getElementById('upload-step-pick');
        const stepLoading = document.getElementById('upload-step-loading');
        const stepSuccess = document.getElementById('upload-step-success');
        const progressBar = document.getElementById('progress-bar');
        const progressPercent = document.getElementById('upload-percentage');
        const filesSummary = document.getElementById('files-summary');

        // VISIBILIDAD DE SECCIONES
        fileRadios.forEach(radio => {
            radio.addEventListener('change', (e) => {
                optionsContainer.classList.toggle('hidden', e.target.value === 'no');
                checkSubmitButtonState();
            });
        });

        methodRadios.forEach(radio => {
            radio.addEventListener('change', (e) => {
                const isCloud = e.target.value === 'cloud';
                driveZone.classList.toggle('hidden', !isCloud);
                whatsappNotice.classList.toggle('hidden', isCloud);
                checkSubmitButtonState();
            });
        });

        // LOGIN DRIVE
        window.handleCredentialResponse = function(response) {
            const payload = JSON.parse(atob(response.credential.split('.')[1]));
            userEmail = payload.email;
            document.getElementById('email').value = userEmail;
            stepLogin.classList.add('hidden');
            stepPick.classList.remove('hidden');
            lucide.createIcons();
        };

        // EVENTOS DRAG & DROP
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults (e) {
            e.preventDefault();
            e.stopPropagation();
        }

        ['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, () => dropArea.classList.add('drag-over'), false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, () => dropArea.classList.remove('drag-over'), false);
        });

        dropArea.addEventListener('drop', (e) => {
            const dt = e.dataTransfer;
            handleSelectedFiles(dt.files);
        }, false);

        dropArea.addEventListener('click', () => fileInput.click());
        fileInput.addEventListener('change', function() {
            handleSelectedFiles(this.files);
        });

        // MANEJO DE ARCHIVOS SELECCIONADOS (FASE DE PREPARACI√ìN)
        function handleSelectedFiles(files) {
            if (files.length === 0) return;

            const allowedExtensions = /(\.pdf|\.doc|\.docx|\.ppt|\.pptx|\.xls|\.xlsx|\.txt|\.jpg|\.jpeg|\.png|\.webp)$/i;
            
            Array.from(files).forEach(file => {
                if (allowedExtensions.exec(file.name)) {
                    // Evitar duplicados por nombre y tama√±o
                    const exists = pendingFiles.some(f => f.name === file.name && f.size === file.size);
                    if (!exists) {
                        pendingFiles.push(file);
                    }
                }
            });

            renderPendingFiles();
        }

        // RENDERIZAR LISTA DE ARCHIVOS PENDIENTES
        function renderPendingFiles() {
            if (pendingFiles.length === 0) {
                pendingFilesContainer.classList.add('hidden');
                return;
            }

            pendingFilesContainer.classList.remove('hidden');
            pendingFilesList.innerHTML = "";

            pendingFiles.forEach((file, index) => {
                const item = document.createElement('div');
                item.className = "flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900/50 rounded-xl border border-gray-100 dark:border-gray-800 animate-fade";
                
                const fileSize = (file.size / 1024).toFixed(1) + " KB";
                
                item.innerHTML = `
                    <div class="flex items-center gap-3 overflow-hidden">
                        <div class="w-8 h-8 bg-brandGreen/10 text-brandGreen rounded-lg flex items-center justify-center shrink-0">
                            <i data-lucide="file-text" class="w-4 h-4"></i>
                        </div>
                        <div class="overflow-hidden">
                            <p class="text-[13px] font-bold truncate dark:text-white">${file.name}</p>
                            <p class="text-[10px] text-slate-400 font-medium">${fileSize}</p>
                        </div>
                    </div>
                    <button type="button" onclick="removePendingFile(${index})" class="p-2 text-slate-300 hover:text-rose-500 transition shrink-0">
                        <i data-lucide="trash-2" class="w-4 h-4"></i>
                    </button>
                `;
                pendingFilesList.appendChild(item);
            });

            lucide.createIcons();
            checkSubmitButtonState();
        }

        // ELIMINAR ARCHIVO DE LA LISTA
        window.removePendingFile = function(index) {
            pendingFiles.splice(index, 1);
            renderPendingFiles();
        };

        // INICIAR SUBIDA REAL AL DRIVE
        startUploadBtn.addEventListener('click', async () => {
            const name = document.getElementById('full-name').value;
            if (!name) {
                alert("Por favor, ingresa tu Nombre y Apellido antes de subir los archivos.");
                return;
            }

            if (pendingFiles.length === 0) return;

            stepPick.classList.add('hidden');
            stepLoading.classList.remove('hidden');
            uploadedFilesCount = pendingFiles.length;

            let currentFileIndex = 0;

            for (const file of pendingFiles) {
                document.getElementById('loading-text').innerText = `Subiendo: ${file.name} (${currentFileIndex + 1}/${pendingFiles.length})`;
                
                await uploadSingleFile(file, name, (progress) => {
                    const totalProgress = ((currentFileIndex + (progress / 100)) / pendingFiles.length) * 100;
                    updateProgressBar(totalProgress);
                });

                currentFileIndex++;
            }

            updateProgressBar(100);
            setTimeout(() => {
                stepLoading.classList.add('hidden');
                stepSuccess.classList.remove('hidden');
                filesSummary.innerText = `Se han subido ${pendingFiles.length} archivos correctamente a nuestro Drive.`;
                isFileUploaded = true;
                pendingFiles = []; // Limpiar lista tras √©xito
                checkSubmitButtonState();
                lucide.createIcons();
            }, 800);
        });

        // FUNCI√ìN PARA SUBIR UN ARCHIVO INDIVIDUAL
        function uploadSingleFile(file, customerName, onProgress) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = async function() {
                    const base64Data = reader.result.split(',')[1];
                    const payload = {
                        base64: base64Data,
                        fileName: file.name,
                        mimeType: file.type,
                        userEmail: userEmail,
                        customerName: customerName,
                        folderType: "CLIENTES" // Esto crear√° la subcarpeta dentro de CLIENTES
                    };

                    let simProgress = 0;
                    const interval = setInterval(() => {
                        simProgress += 10;
                        if (simProgress > 90) simProgress = 90;
                        onProgress(simProgress);
                    }, 150);

                    try {
                        await fetch(scriptURL, {
                            method: 'POST',
                            mode: 'no-cors',
                            body: JSON.stringify(payload)
                        });
                        
                        clearInterval(interval);
                        onProgress(100);
                        resolve();
                    } catch (e) {
                        clearInterval(interval);
                        console.error("Error subiendo archivo:", file.name, e);
                        reject(e);
                    }
                };
                reader.onerror = reject;
            });
        }

        function updateProgressBar(val) {
            const p = Math.round(val);
            progressBar.style.width = p + "%";
            progressPercent.innerText = p + "%";
        }

        function checkSubmitButtonState() {
            const hasFiles = Array.from(fileRadios).find(r => r.checked)?.value === 'yes';
            const method = hasFiles ? Array.from(methodRadios).find(r => r.checked)?.value : null;
            
            // Si elige Drive y hay archivos en la lista pero no se han subido, el bot√≥n final se bloquea
            if (hasFiles && method === 'cloud' && !isFileUploaded) {
                submitBtn.disabled = true;
                submitBtn.style.opacity = "0.6";
            } else {
                submitBtn.disabled = false;
                submitBtn.style.opacity = "1";
            }
        }

        // ENV√çO A WHATSAPP
        orderForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const name = document.getElementById('full-name').value;
            const phone = document.getElementById('phone').value;
            const type = document.getElementById('work-type').value;
            const subject = document.getElementById('subject').value;
            const title = document.getElementById('title').value;
            const pages = document.getElementById('pages').value;
            const format = document.getElementById('format').value;
            const deadline = document.getElementById('deadline').value.replace('T', ' ');

            const hasFiles = Array.from(fileRadios).find(r => r.checked)?.value === 'yes';
            const method = hasFiles ? Array.from(methodRadios).find(r => r.checked)?.value : 'no';

            let fileInfo = "No se adjuntaron archivos.";
            if (hasFiles) {
                fileInfo = method === 'cloud' 
                    ? `‚úÖ CARGADO A GOOGLE DRIVE (${uploadedFilesCount} archivo(s))` 
                    : "üìé SE ENVIAR√ÅN MANUALMENTE POR WHATSAPP";
            }

            const message = `*NUEVO PEDIDO ACAD√âMIKA*%0A%0A` +
                            `üë§ *Cliente:* ${name}%0A` +
                            `üìû *Celular:* ${phone}%0A%0A` +
                            `üìë *Trabajo:* ${type}%0A` +
                            `üìö *Asignatura:* ${subject}%0A` +
                            `üéØ *T√≠tulo:* ${title}%0A` +
                            `üìÑ *P√°ginas:* ${pages}%0A` +
                            `üìê *Formato:* ${format}%0A%0A` +
                            `‚è∞ *Entrega:* ${deadline}%0A%0A` +
                            `üìé *Archivos:* ${fileInfo}`;

            window.open(`https://wa.me/593995458260?text=${message}`, '_blank');
        });

        // NAVBAR & TEMA
        const menuBtn = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        menuBtn.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));

        const themeToggleBtn = document.getElementById('theme-toggle');
        const navLogo = document.getElementById('nav-logo');
        const footerLogo = document.getElementById('footer-logo');
        const logoColor = "https://academika-plus.github.io/img/static/academika_color.png";
        const logoBlanco = "https://academika-plus.github.io/img/static/academika_blanco.png";

        function updateLogos(isDark) {
            navLogo.src = isDark ? logoBlanco : logoColor;
            footerLogo.src = isDark ? logoBlanco : logoColor;
        }

        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
            updateLogos(true);
        }

        themeToggleBtn.addEventListener('click', () => {
            const isDark = document.documentElement.classList.toggle('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            updateLogos(isDark);
        });
    </script>
</body>
</html>